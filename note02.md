# 데이터 모델과 질의 언어

- 데이터 모델은 소프트웨어 개발에서 제일 중요한 부분
- 소프트웨어가 어떻게 작성됐는지 영향
- 문제를 어떻게 생각해야 하는지에 영향
- 계층의 핵심적인 문제는 하위 계층 관점에서 데이터 모델을 표현하는 방법
- 각 계층은 명확한 데이터 모델을 제공해 하위 계층의 복잡성을 숨김

## 관계형 모델과 문서 모델

### 관계형 모델

- 데이터(SQL에서 테이블)는 관계(relation)로 구성
- 관계는 순서 없는 튜플(SQL에서 로우(row)) 모음
- 근원은 비즈니스 데이터 처리 & 트랜잭션 처리 & 일괄 처리

### NoSQL의 탄생

- NoSQL 이라는 이름은 실제로 어떤 특정 기술을 참고한 것이 아님
- NoSQL은 다시 거슬러 올라가 Not Only SQL로 재해석됨
- 매우 높은 쓰기 처리량 달성
- 뛰어난 확장성

### 객체 관계형 불일치

- 데이터를 관계형 테이블에 저장하려면 전환 계층이 필요함
- 이러한 분리를 종종 임피던스 불일치(impedance mismatch)라고 부름
- ActiveRecord나 Hibernate 같은 ORM 프레임웤이 등장
- 그렇지만 두 모델 간의 차이를 완벽히 숨길 수 없음

### 문서 데이터베이스는 역사를 반복하고 있나?

- IBM의 정보관리시스템 (Information Management System) IMS의 설계는 계층 모델
- 계층 모델은 문서 데이터베이스에서 사용하는 json 모델과 비슷
- 다대다 관계 표현은 어려움
- 계층 모델의 한계를 해결하기 위해 관계형 모델과 네트워크 모델

### 관계형 vs 문서 데이터베이스

- 문서 데이터베이스는 상위 레코드 내에 중첩된 레코드를 저장
- 둘 모두 관련 항목은 고유한 식별자로 참조
- 관계형 모델은 외래 키, 문서 모델은 문서 참조(document reference)

### 관계형 데이터베이스와 오늘날의 문서 데이터베이스

- 둘을 비교하는 경우, 내결함성과 동시성 처리를 포함해 고려해야 할 차이점이 많다.
- 문서 데이터 모델은 스키마 유연성, 지역성에 기인한 더 나은 성능
- 관계형 모델은 조인, 다대일, 다대다 관계를 더 잘 지원

## 어떤 데이터 모델이 애플리케이션 코드를 더 간단하게 할까?

- shredding 관계형 기법은 다루기 힘든 스키마와 복잡한 애플리케이션 코드를 발생

### 문서 모델에서의 스키마 유연성

- 문서의 데이터에 어떤 스키마를 강요하지 않음
- 종종 스키마리스(schemaless)로 불림
- 쓰기 스키마(schema-on-write)와 읽기 스키마(schema-on-read)
- 읽기 스키마는 동적 타입 확인과 유사
- 쓰기 스키마는 정적 타입 확인과 비슷

### 질의를 위한 데이터 지역성

- 애플리케이션이 자주 전체 문서에 접근해야 할 때, 저장소 지역성(storage locality)을 활용하면 성능 이점이 있음
- 오라클은 다중 테이블 색인 클러스터 테이블(multi-table index cluster table) 기능을 사용해 동일한 특성을 제공
- 빅테이블(Bigtable) 데이터 모델의 칼럼 패밀리(column-family\_ 개념(카산드라와 HBase에서 사용)이 지역성 관리와 유사한 목적이 있음

### 문서 데이터베이스와 관계형 데이터베이스의 통합

- 최근 관계형 데이터베이스는 JSON 문서에 대해 지원

### 맵리듀스 질의

- MapReduce
- 많은 컴퓨터에서 대량의 데이터를 처리하기 위한 프로그래밍 모델
- 몽고DB에서 맵리듀스는 순수(pure) 함수여야함. (추가적인 데이터베이스 질의를 수행할 수 없고, side effect가 없어야 함)

### 그래프형 데이터 모델

- 정점(vertex) (노드나 엔티티라고도 한다)
- 간선(egde) (관계나 호(arc)라고도 한다)
